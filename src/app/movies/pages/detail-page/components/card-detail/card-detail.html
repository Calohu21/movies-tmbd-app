<div class="relative w-full min-h-[400px] md:min-h-[500px] overflow-hidden rounded-lg">
  <div class="absolute inset-0 brightness-80">
    <img
      [ngSrc]="movie().backdrop_path | tmdbImage: 'backdrop'"
      [alt]="movie().title"
      class="object-cover blur-[2px]"
      priority
      fill
    />
    <div class="absolute inset-0 bg-black/50"></div>
  </div>

  <div class="absolute bottom-0 left-0 z-10 flex flex-col md:flex-row items-end gap-6 p-6 md:p-10">
    <div class="flex-shrink-0 w-28 md:w-44 lg:w-60">
      <img
        [ngSrc]="movie().poster_path | tmdbImage: 'poster'"
        [alt]="movie().title"
        class="rounded-lg shadow-2xl w-full h-auto"
        priority
        width="500"
        height="750"
      />
    </div>
    <div class="flex flex-col justify-end text-white pb-2">
      <h3 class="text-xl md:text-2xl lg:text-3xl font-bold">
        {{ movie().title }}
      </h3>
      <div class="flex items-center gap-2 text-m mt-3 mr-15">
        {{ movie().release_date | date: 'dd-M-yyyy' }}
        <div class="flex items-center gap-2 text-m">- {{ movie().runtime | runtime }}</div>
        <div class="flex items-center gap-2 text-m mr-15">{{ movie().genres | genres }}</div>
      </div>
      <div class="flex items-center gap-2 text-sm mt-3 mr-15 w-2/3">{{ movie().overview }}</div>

      <div class="flex items-center gap-1">
        <i class="fa-solid fa-star text-yellow-500 text-sm sm:text-base lg:text-lg"></i>
        <span class="text-base sm:text-lg lg:text-xl font-semibold">
          {{ movie().vote_average }}
        </span>
      </div>
      <div class="flex items-center gap-2 text-m mt-3 mr-15">
        Número de votos: {{ movie().vote_count }}
      </div>
    </div>
    <div class="absolute bottom-6 right-6 z-20">
      <button
        (click)="openTrailer(); $event.stopPropagation()"
        class="flex items-center gap-2 cursor-pointer transition-all duration-300 hover:text-yellow-500 hover:scale-105 text-white"
      >
        <i class="fa-regular fa-circle-play text-3xl lg:text-4xl"></i>
        <span class="font-bold text-lg lg:text-xl">Reproducir tráiler</span>
      </button>
    </div>
  </div>
</div>

<app-movie-trailer
  [safeTrailerUrl]="trailerService.safeTrailerUrl()"
  [isOpenModal]="trailerService.isOpenModal()"
  (closeModal)="closeTrailer()"
/>
